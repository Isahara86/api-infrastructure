version: '3.8'

services:
  postgres:
    image: postgis/postgis
    restart: always
    environment:
      POSTGRES_DATABASE: root
      POSTGRES_USER: postgres
      POSTGRES_PASSWORD: postgres
    ports: 
        - "5432:5432"
    volumes: 
        - ./docker_postgres_init.sql:/docker-entrypoint-initdb.d/docker_postgres_init.sql

  rabbitmq:
    image: rabbitmq:3-management-alpine
    container_name: rabbitmq
    volumes:
        - ./.docker/rabbitmq/etc/:/etc/rabbitmq/
        - ./.docker/rabbitmq/data/:/var/lib/rabbitmq/
        - ./.docker/rabbitmq/logs/:/var/log/rabbitmq/
    environment:
        RABBITMQ_ERLANG_COOKIE: ${RABBITMQ_ERLANG_COOKIE}
        RABBITMQ_DEFAULT_USER: ${RABBITMQ_DEFAULT_USER}
        RABBITMQ_DEFAULT_PASS: ${RABBITMQ_DEFAULT_PASS}
    ports:
        - 5672:5672
        - 15672:15672
  # activemq:
  #   image: rmohr/activemq
  #   restart: always
  #   ports: 
  #       - "61616:61616"
  #       - "8161:8161"
  #       - "1883:1883"
